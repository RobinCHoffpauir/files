
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">pymc3</span> <span class="k">as</span> <span class="nn">pm</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">RANDOM_SEEDS</span> <span class="o">=</span> <span class="mi">8965</span><span class="p">,</span> <span class="mi">197009</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>/Users/cfonnesbeck/anaconda3/envs/dev/lib/python3.7/site-packages/dask/config.py:168: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  data = yaml.load(f.read()) or {}
/Users/cfonnesbeck/anaconda3/envs/dev/lib/python3.7/site-packages/distributed/config.py:20: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  defaults = yaml.load(f)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<h1>Question 3<a class="anchor-link" href="#Question-3">¶</a>
</h1>
<p>The accompanying CSV files ‘pitchclassificationtrain.csv’ and ‘pitchclassificationtest.csv’ contain information from nearly 20,000 pitches from five different pitchers over three years. There are 13 columns:</p>
<ul>
<li>
<code>pitchid</code>: a unique identifier for each pitch.</li>
<li>
<code>pitcherid</code>: identity of the pitcher (1-5). The identities are the same in both datasets.         Pitcher 3 in the training set is the same pitcher as Pitcher 3 in the test set.</li>
<li>
<code>yearid</code>: year in which the pitch occurred (1-3).</li>
<li>
<code>throws</code>: handedness of the pitcher, where 1 = right-handed and 2 = left-handed</li>
<li>
<code>height</code>: height in inches of the pitcher.</li>
<li>
<code>initspeed</code>: initial speed of the pitch as it leaves the pitcher's hand, reported in MPH</li>
<li>
<code>breakx</code>: horizontal distance in inches between where a pitch crossed the plate and where a hypothetical spinless pitch would have, where negative is inside to a right-handed hitter.</li>
<li>
<code>breakz</code>: vertical distance in inches between where a pitch crossed the plate and where a hypothetical spinless pitch would have, where negative is closer to the ground.</li>
<li>
<code>initposx</code>: horizontal position of the release point of the pitch. The position is measured in feet from the center of the rubber when the pitch is released, where negative is towards the third-base side of the rubber.</li>
<li>
<code>initposz</code>: vertical position of the release point of the pitch.  The position is measured in feet above the ground.</li>
<li>
<code>extension</code>: distance in feet in front of the pitching rubber from which the pitcher releases the ball.</li>
<li>
<code>spinrate</code>: how fast the ball is spinning as it leaves the pitcher's hand, reported in RPM</li>
<li>
<code>type</code>: type of pitch that was thrown (will only appear in the training dataset).</li>
</ul>
<p>Your goal is to give the most likely pitch type for all of the pitches in the test dataset using information from the training dataset. Note that the pitchers in the datasets do not correspond with any specific real pitchers but are meant to be representative of real data. Please include the following with your final submission:</p>
<ol>
<li>CSV with two columns: the pitchid and the corresponding predicted pitch type</li>
<li>write-up of your method and results, including any tables or figures that help communicate your findings</li>
<li>all code used to solve the problem</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is a multi-class classification problem. One approach is to use a parametric statistical model, and express the pitch class as a categorical outcome. However, this requires the explicit specification of the combinations of variables thought to be predictive of pitch type <em>a priori</em>. A more flexible approach, and an effective one when plenty of data are available (as we have here), is to use an ensemble machine learning algorithm. A key advantage of such methods is that higher-order interactions among variables that may be powerful predictors can be discovered automatically, without pre-specification.</p>
<p>An effective ensemble method for classification is <strong>gradient boosting</strong>. Boosting combines a set of "weak" learners (ones that, individually, perform only slightly better than chance) to a yield a system with very high predictive performance. The idea is that by sequentially applying very fast, simple models, we can get a total model error which is better than any of the individual pieces. Each successive fit to a new weak learner yields and estimate of residual error, which is used to weight the remaining observations such that the next learner emphasizes the classification of observations that have not yet been correctly classified. The process is stagewise, meaning that existing trees are left unchanged as the model is enlarged. Only the fitted value for each observation is re-estimated at each step to reflect the contribution of the newly added tree. The final model is a linear combination of many trees (usually hundreds to thousands) that can be thought of as a classification/regression model where each term itself is a tree.</p>
<p>On average, boosting outperforms competing algorithms like random forests or support vector machines, but requires less data than deep neural networks, which are often applied to large classification tasks.</p>
<p><a href="https://arxiv.org/abs/1603.02754">XGBoost</a> is an open-source, high-performance implementation of gradient boosting methods for decision trees. It features natively-parallel tree construction, out-of-core computation, and cache optimization, and is readily deployable on clusters. It typically offers better speed and performance relative to <code>scikit-learn</code> and other comparable libraries.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Import data from csv files.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pybaseball</span> <span class="kn">import</span> <span class="n">statcast</span>

<span class="n">pitch_data</span> <span class="o">=</span> <span class="n">statcast</span><span class="p">(</span><span class="n">start_dt</span><span class="o">=</span><span class="s1">'2017-04-01'</span><span class="p">,</span> <span class="n">end_dt</span><span class="o">=</span><span class="s1">'2017-04-30'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is a large query, it may take a moment to complete
Completed sub-query from 2017-04-01 to 2017-04-05
Completed sub-query from 2017-04-06 to 2017-04-06
Completed sub-query from 2017-04-07 to 2017-04-12
Completed sub-query from 2017-04-13 to 2017-04-18
Completed sub-query from 2017-04-19 to 2017-04-24
Completed sub-query from 2017-04-25 to 2017-04-30
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pitch_data</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(108785, 79)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pitch_data</span><span class="o">.</span><span class="n">pitch_type</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>FF    25503
SL    11794
FT     9566
CH     7474
CU     5422
SI     5004
FC     3846
KC     1734
FS     1239
KN      371
FO       38
EP       18
PO        8
SC        4
AB        2
UN        1
Name: pitch_type, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pitch_type</span> <span class="o">=</span> <span class="n">pitch_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'pitch_type'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>

<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
                    <span class="n">pitch_data</span><span class="p">,</span> <span class="n">pitch_type</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.33</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Extract columns to be used for prediction. Pitcher and year are probably not predictive, so I am leaving them out.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">prediction_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'p_throws'</span><span class="p">,</span> <span class="s1">'release_spin_rate'</span><span class="p">,</span> <span class="s1">'effective_speed'</span><span class="p">,</span> <span class="s1">'release_extension'</span><span class="p">,</span>
                   <span class="s1">'vx0'</span><span class="p">,</span> <span class="s1">'vy0'</span><span class="p">,</span> <span class="s1">'vz0'</span><span class="p">,</span> <span class="s1">'ax'</span><span class="p">,</span> <span class="s1">'ay'</span><span class="p">,</span> <span class="s1">'az'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Relabel pitch types using the <code>scikit-learn</code> label encoder (XGboost requires sequential labels).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">LabelEncoder</span>

<span class="n">encoder</span> <span class="o">=</span> <span class="n">LabelEncoder</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">y_train</span><span class="p">)</span>
<span class="n">y_train_encoded</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">y_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>XGBoost runs faster using its own binary data structures:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">xgboost</span> <span class="k">as</span> <span class="nn">xgb</span>

<span class="n">dtrain</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="n">X_train</span><span class="p">[</span><span class="n">prediction_cols</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">y_train_encoded</span><span class="p">)</span>
<span class="n">dtest</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">DMatrix</span><span class="p">(</span><span class="n">X_test</span><span class="p">[</span><span class="n">prediction_cols</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>/Users/fonnescj/anaconda3/envs/dev/lib/python3.6/site-packages/sklearn/cross_validation.py:44: DeprecationWarning: This module was deprecated in version 0.18 in favor of the model_selection module into which all the refactored classes and functions are moved. Also note that the interface of the new CV iterators are different from that of this module. This module will be removed in 0.20.
  "This module will be removed in 0.20.", DeprecationWarning)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can specify the hyperparameters of the model, to use as a starting point for the analysis.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">xgb_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'max_depth'</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>  
    <span class="s1">'eta'</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> 
    <span class="s1">'nthread'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>                <span class="c1"># Use 4 cores for multiprocessing</span>
    <span class="s1">'num_class'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>              <span class="c1"># pitch types</span>
    <span class="s1">'objective'</span><span class="p">:</span> <span class="s1">'multi:softmax'</span> <span class="c1"># use softmax multi-class classification</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">boosted_classifier</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">xgb_params</span><span class="p">,</span> <span class="n">dtrain</span><span class="p">,</span> <span class="n">num_boost_round</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using arbitrarily-chosen hyperparemeters, the model achieves nearly perfect accuracy on the training set.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>

<span class="n">predictions</span> <span class="o">=</span> <span class="n">boosted_classifier</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">dtrain</span><span class="p">)</span>
<span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_train_encoded</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[41]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0.99889478337754201</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>However, this model may be overfit to the training dataset, so I am going to use 5-fold cross-validation to select hyperparameters that result in the best fit.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">param_grid</span> <span class="o">=</span> <span class="p">[(</span><span class="n">max_depth</span><span class="p">,</span> <span class="n">min_child_weight</span><span class="p">,</span> <span class="n">eta</span><span class="p">)</span> <span class="k">for</span> <span class="n">max_depth</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span> 
                                                 <span class="k">for</span> <span class="n">min_child_weight</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
                                                 <span class="k">for</span> <span class="n">eta</span> <span class="ow">in</span> <span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">min_merror</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
<span class="n">best_params</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">for</span> <span class="n">max_depth</span><span class="p">,</span> <span class="n">min_child_weight</span><span class="p">,</span> <span class="n">eta</span> <span class="ow">in</span> <span class="n">param_grid</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"CV with max_depth=</span><span class="si">{}</span><span class="s2">, min_child_weight=</span><span class="si">{}</span><span class="s2">, eta=</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                             <span class="n">max_depth</span><span class="p">,</span>
                             <span class="n">min_child_weight</span><span class="p">,</span>
                             <span class="n">eta</span><span class="p">))</span>

    <span class="c1"># Update our parameters</span>
    <span class="n">xgb_params</span><span class="p">[</span><span class="s1">'max_depth'</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_depth</span>
    <span class="n">xgb_params</span><span class="p">[</span><span class="s1">'min_child_weight'</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_child_weight</span>
    <span class="n">xgb_params</span><span class="p">[</span><span class="s1">'eta'</span><span class="p">]</span> <span class="o">=</span> <span class="n">eta</span>

    <span class="c1"># Run CV</span>
    <span class="n">cv_results</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">cv</span><span class="p">(</span>
        <span class="n">xgb_params</span><span class="p">,</span>
        <span class="n">dtrain</span><span class="p">,</span>
        <span class="n">num_boost_round</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">nfold</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="s1">'merror'</span><span class="p">},</span> 
        <span class="n">early_stopping_rounds</span><span class="o">=</span><span class="mi">3</span>
    <span class="p">)</span>

    <span class="c1"># Update best score</span>
    <span class="n">mean_merror</span> <span class="o">=</span> <span class="n">cv_results</span><span class="p">[</span><span class="s1">'test-merror-mean'</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="n">boost_rounds</span> <span class="o">=</span> <span class="n">cv_results</span><span class="p">[</span><span class="s1">'test-merror-mean'</span><span class="p">]</span><span class="o">.</span><span class="n">idxmin</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\t</span><span class="s2">merror </span><span class="si">{}</span><span class="s2"> for </span><span class="si">{}</span><span class="s2"> rounds"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mean_merror</span><span class="p">,</span> <span class="n">boost_rounds</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">mean_merror</span> <span class="o">&lt;</span> <span class="n">min_merror</span><span class="p">:</span>
        <span class="n">min_merror</span> <span class="o">=</span> <span class="n">mean_merror</span>
        <span class="n">best_params</span> <span class="o">=</span> <span class="p">(</span><span class="n">max_depth</span><span class="p">,</span> <span class="n">min_child_weight</span><span class="p">,</span> <span class="n">eta</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Best params: </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, merror: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">best_params</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">best_params</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">best_params</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">min_merror</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>CV with max_depth=6, min_child_weight=7, eta=0.15
	merror 0.051363400000000003 for 35 rounds
CV with max_depth=6, min_child_weight=7, eta=0.2
	merror 0.051878999999999995 for 18 rounds
CV with max_depth=6, min_child_weight=7, eta=0.25
	merror 0.051289600000000005 for 21 rounds
CV with max_depth=6, min_child_weight=9, eta=0.15
	merror 0.0517316 for 28 rounds
CV with max_depth=6, min_child_weight=9, eta=0.2
	merror 0.051289600000000005 for 19 rounds
CV with max_depth=6, min_child_weight=9, eta=0.25
	merror 0.052026399999999993 for 17 rounds
CV with max_depth=6, min_child_weight=11, eta=0.15
	merror 0.0535002 for 25 rounds
CV with max_depth=6, min_child_weight=11, eta=0.2
	merror 0.052395199999999996 for 17 rounds
CV with max_depth=6, min_child_weight=11, eta=0.25
	merror 0.05128959999999999 for 19 rounds
CV with max_depth=6, min_child_weight=13, eta=0.15
	merror 0.052026800000000005 for 31 rounds
CV with max_depth=6, min_child_weight=13, eta=0.2
	merror 0.05099479999999999 for 28 rounds
CV with max_depth=6, min_child_weight=13, eta=0.25
	merror 0.0517316 for 17 rounds
CV with max_depth=8, min_child_weight=7, eta=0.15
	merror 0.05239499999999999 for 7 rounds
CV with max_depth=8, min_child_weight=7, eta=0.2
	merror 0.05047900000000001 for 16 rounds
CV with max_depth=8, min_child_weight=7, eta=0.25
	merror 0.0501104 for 16 rounds
CV with max_depth=8, min_child_weight=9, eta=0.15
	merror 0.0493 for 25 rounds
CV with max_depth=8, min_child_weight=9, eta=0.2
	merror 0.050036800000000006 for 19 rounds
CV with max_depth=8, min_child_weight=9, eta=0.25
	merror 0.0507 for 16 rounds
CV with max_depth=8, min_child_weight=11, eta=0.15
	merror 0.05283720000000001 for 12 rounds
CV with max_depth=8, min_child_weight=11, eta=0.2
	merror 0.0503316 for 20 rounds
CV with max_depth=8, min_child_weight=11, eta=0.25
	merror 0.0501842 for 24 rounds
CV with max_depth=8, min_child_weight=13, eta=0.15
	merror 0.0507738 for 24 rounds
CV with max_depth=8, min_child_weight=13, eta=0.2
	merror 0.050405200000000004 for 16 rounds
CV with max_depth=8, min_child_weight=13, eta=0.25
	merror 0.051584399999999996 for 12 rounds
CV with max_depth=10, min_child_weight=7, eta=0.15
	merror 0.0515106 for 8 rounds
CV with max_depth=10, min_child_weight=7, eta=0.2
	merror 0.0508474 for 13 rounds
CV with max_depth=10, min_child_weight=7, eta=0.25
	merror 0.0515108 for 9 rounds
CV with max_depth=10, min_child_weight=9, eta=0.15
	merror 0.0523212 for 11 rounds
CV with max_depth=10, min_child_weight=9, eta=0.2
	merror 0.0490788 for 22 rounds
CV with max_depth=10, min_child_weight=9, eta=0.25
	merror 0.0521002 for 6 rounds
CV with max_depth=10, min_child_weight=11, eta=0.15
	merror 0.052911 for 9 rounds
CV with max_depth=10, min_child_weight=11, eta=0.2
	merror 0.052174 for 9 rounds
CV with max_depth=10, min_child_weight=11, eta=0.25
	merror 0.050478999999999996 for 17 rounds
CV with max_depth=10, min_child_weight=13, eta=0.15
	merror 0.0543844 for 5 rounds
CV with max_depth=10, min_child_weight=13, eta=0.2
	merror 0.0518058 for 14 rounds
CV with max_depth=10, min_child_weight=13, eta=0.25
	merror 0.051289600000000005 for 9 rounds
CV with max_depth=12, min_child_weight=7, eta=0.15
	merror 0.049741999999999995 for 22 rounds
CV with max_depth=12, min_child_weight=7, eta=0.2
	merror 0.0510686 for 10 rounds
CV with max_depth=12, min_child_weight=7, eta=0.25
	merror 0.0521 for 4 rounds
CV with max_depth=12, min_child_weight=9, eta=0.15
	merror 0.05224759999999999 for 8 rounds
CV with max_depth=12, min_child_weight=9, eta=0.2
	merror 0.05180559999999999 for 5 rounds
CV with max_depth=12, min_child_weight=9, eta=0.25
	merror 0.051658 for 5 rounds
CV with max_depth=12, min_child_weight=11, eta=0.15
	merror 0.051142200000000006 for 14 rounds
CV with max_depth=12, min_child_weight=11, eta=0.2
	merror 0.05055259999999999 for 16 rounds
CV with max_depth=12, min_child_weight=11, eta=0.25
	merror 0.0507738 for 14 rounds
CV with max_depth=12, min_child_weight=13, eta=0.15
	merror 0.052615999999999996 for 8 rounds
CV with max_depth=12, min_child_weight=13, eta=0.2
	merror 0.050700199999999994 for 14 rounds
CV with max_depth=12, min_child_weight=13, eta=0.25
	merror 0.050036800000000006 for 21 rounds
Best params: 10, 9, 0.2, merror: 0.0490788
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I can select the best parameters from the cross-validation procedure to use to predict on the test data (I could do a more refined search of the hyperparameter space, but the multiclass errors appear to be broadly similar across the range of values that I used, so I will stick with these).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [61]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">xgb_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'max_depth'</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  
    <span class="s1">'eta'</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> 
    <span class="s1">'min_child_weight'</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>       <span class="c1"># minimum sum of instance weight needed in a child </span>
    <span class="s1">'nthread'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>                <span class="c1"># use 4 cores for multiprocessing</span>
    <span class="s1">'num_class'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>              <span class="c1"># pitch types</span>
    <span class="s1">'objective'</span><span class="p">:</span> <span class="s1">'multi:softmax'</span> <span class="c1"># use softmax multi-class classification</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [62]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">boosted_classifier</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">xgb_params</span><span class="p">,</span> <span class="n">dtrain</span><span class="p">,</span> <span class="n">num_boost_round</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The accuracy score for the training data is nominally lower than the original model, but not much; moreover this model should perform better in out-of-sample prediction.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [63]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>

<span class="n">predictions</span> <span class="o">=</span> <span class="n">boosted_classifier</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">dtrain</span><span class="p">)</span>
<span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_train_encoded</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[63]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0.97782198644267615</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Below is a plot of feature importances, using the F-score. This quantifies how many times a particular variable is used as a splitting variable across all the trees. This ranking makes intiutive sense, with movement and velocity being the most relevant factors.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [64]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">xgb</span><span class="o">.</span><span class="n">plot_importance</span><span class="p">(</span><span class="n">boosted_classifier</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[64]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x120655e80&gt;</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Generate predictions on the test set using fitted classifier.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [65]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_predictions</span> <span class="o">=</span> <span class="n">boosted_classifier</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">dtest</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [66]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_predictions</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[66]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 5.,  1.,  5., ...,  1.,  3.,  1.], dtype=float32)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Back-transform label encoding, and export to <code>predicted_pitches_fonnesbeck.csv</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [67]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">predicted_pitches</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">encoder</span><span class="o">.</span><span class="n">inverse_transform</span><span class="p">(</span><span class="n">test_predictions</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">X_test</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">predicted_pitches</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'pitch_type'</span>
<span class="n">predicted_pitches</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'pitchid'</span>
<span class="n">predicted_pitches</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">'predicted_pitches_fonnesbeck.csv'</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
 

